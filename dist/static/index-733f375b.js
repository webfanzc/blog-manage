import{b as a,a as e,f as l,ac as t,h as u,Y as s,j as n,w as o,i,aj as d,o as r,z as c,A as v,l as f,an as m,ao as p,t as g,ae as _,ap as b,E as w,aq as y,ar as h,as as k,_ as x}from"./index-59cc04c7.js";const C={class:"app-container"},N={class:"toolbar-wrapper"},V={class:"table-wrapper"},j=x(a({__name:"index",setup(a){const x=e(!1),j=e(!1),z=e(""),q=e(null),B=e({tagName:""}),F={tagName:{required:!0,message:"请输入标签名称",trigger:"blur"}};async function T(){await y(),w.success("操作成功"),I()}function U(){var a;null==(a=q.value)||a.resetFields()}async function A(){var a;z.value?await h({...B.value,id:z.value}):await k({...B.value}),null==(a=q.value)||a.resetFields(),I(),j.value=!1,w.success("操作成功")}const E=e([]),I=()=>{x.value=!0,d().then((a=>{E.value=a.data})).catch((()=>{E.value=[]})).finally((()=>{x.value=!1}))};return I(),(a,e)=>{const d=l("el-button"),y=l("el-tag"),h=l("el-table-column"),k=l("el-table"),R=l("el-card"),Y=l("el-input"),$=l("el-form-item"),D=l("el-form"),G=l("el-dialog"),H=t("loading");return r(),u("div",C,[s((r(),n(R,{shadow:"never"},{default:o((()=>[c("div",N,[c("div",null,[i(d,{type:"primary",icon:f(m),onClick:e[0]||(e[0]=a=>j.value=!0)},{default:o((()=>[v("新增")])),_:1},8,["icon"]),i(d,{type:"danger",icon:f(p),onClick:T},{default:o((()=>[v("删除未使用标签")])),_:1},8,["icon"])])]),c("div",V,[i(k,{data:E.value},{default:o((()=>[i(h,{prop:"tags",label:"标签"},{default:o((a=>[i(y,{type:"success",effect:"plain"},{default:o((()=>[v(g(a.row.tagName),1)])),_:2},1024)])),_:1}),i(h,{fixed:"right",label:"操作",width:"150",align:"center"},{default:o((a=>[i(d,{type:"primary",text:"",bg:"",size:"small",onClick:e=>{return l=a.row,z.value=l._id,B.value.tagName=l.tagName,void(j.value=!0);var l}},{default:o((()=>[v("修改")])),_:2},1032,["onClick"]),i(d,{type:"danger",text:"",bg:"",size:"small",onClick:e=>{return l=a.row,void _.confirm(`正在删除标签：${l.tagName}，确认删除？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{b({id:l._id}).then((()=>{w.success("删除成功"),I()}))}));var l}},{default:o((()=>[v("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])),_:1})),[[H,x.value]]),i(G,{modelValue:j.value,"onUpdate:modelValue":e[3]||(e[3]=a=>j.value=a),title:""===z.value?"新增标签":"修改标签",onClose:U,width:"30%"},{footer:o((()=>[i(d,{onClick:e[2]||(e[2]=a=>j.value=!1)},{default:o((()=>[v("取消")])),_:1}),i(d,{type:"primary",onClick:A},{default:o((()=>[v("确认")])),_:1})])),default:o((()=>[i(D,{ref_key:"formRef",ref:q,model:B.value,rules:F,"label-width":"100px","label-position":"left"},{default:o((()=>[i($,{prop:"tagName",label:"标签名"},{default:o((()=>[i(Y,{modelValue:B.value.tagName,"onUpdate:modelValue":e[1]||(e[1]=a=>B.value.tagName=a),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-ac2d1854"]]);export{j as default};
